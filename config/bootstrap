#! /usr/bin/env bash
################################################################################
# Copyright (c) 2012 Los Alamos National Security, LLC
# All rights reserved.
################################################################################

#------------------------------------------------------------------------------#
# Usage: bootstrap [devel]
#------------------------------------------------------------------------------#

#------------------------------------------------------------------------------#
# Generate configure.ac file
#------------------------------------------------------------------------------#
echo "Generating configure.ac"
config/create_configure_ac $1 > configure.ac

#------------------------------------------------------------------------------#
# Generate Makefile.am in lib directory
#------------------------------------------------------------------------------#
#echo "Generating lib/Makefile.am"
#[ ! -d lib ] && mkdir lib
#config/create_lib_am > lib/Makefile.am

#------------------------------------------------------------------------------#
# Call aclocal to generate m4 file
#------------------------------------------------------------------------------#
echo "Calling aclocal -I m4"
aclocal -I m4 > /dev/null 2>&1

#------------------------------------------------------------------------------#
# Call automake
#------------------------------------------------------------------------------#
echo "Calling automake -af --foreign"
automake -af --foreign -c

#------------------------------------------------------------------------------#
# Call autoconf
#------------------------------------------------------------------------------#
echo "Calling autoconf"
autoconf
